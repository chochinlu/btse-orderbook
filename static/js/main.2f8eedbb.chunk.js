(this["webpackJsonpftx-look-orderbook"]=this["webpackJsonpftx-look-orderbook"]||[]).push([[0],{19:function(e,n,t){},23:function(e,n,t){"use strict";t.r(n);var i,o,c,r=t(1),s=t.n(r),a=t(11),l=t.n(a),u=t(4),d=t(2),b=t(9),p=t(3),j=t(5),x=t.n(j),f=(t(19),function(e){return Number(e).toLocaleString(void 0,{minimumFractionDigits:4})}),h=t(0),O=p.b.span(i||(i=Object(d.a)(["\n  font-weight: bold;\n  color: #ff3b69;\n"]))),g=p.b.span(o||(o=Object(d.a)(["\n  font-weight: bold;\n  color: #02c77a;\n"])));function v(e){var n=e.isBid?"left":"right",t=e.isBid?"rgba(2, 199, 122, 0.25)":"rgba(255, 59, 105, 0.25)",i=e.isBid?"buyFlash":"sellFlash",o={backgroundImage:"linear-gradient(\n            to ".concat(n,",\n            ").concat(t,",\n            ").concat(t," ").concat(e.percent,"%,\n            rgba(0, 0, 0, 0) ").concat(e.percent,"%\n        "),animationName:e.isChanged?i:"none",animationDuration:"0.2s"},c={textAlign:e.isBid?"right":"left"};return Object(h.jsxs)("tr",{className:"row",style:o,onMouseEnter:function(){e.handleMouseEnter(e.quote)},children:[Object(h.jsx)("td",{className:"cell",style:c,children:e.isBid?f(e.quote.size):Object(h.jsx)(O,{children:f(e.quote.price)})}),Object(h.jsx)("td",{className:"cell",style:c,children:e.isBid?Object(h.jsx)(g,{children:f(e.quote.price)}):f(e.quote.size)})]})}var m,y,w,B=p.b.div(c||(c=Object(d.a)(["\n  display: inline-block;\n  padding: 8px 16px;\n  border: 1px solid #e0e0e0;\n  //box-shadow: #e0e0e0 2px 2px 2px 2px;\n  //box-shadow: 5px 8px 24px 5px rgba(224, 224, 224, 1);\n  box-shadow: 2px 3px 11px 7px rgba(224, 224, 224, 0.5);\n  font-size: 12px;\n\n  background: white;\n  position: absolute;\n  top: ","px;\n  ",";\n  z-index: 2;\n\n  span:first-child {\n    padding-right: 8px;\n    border-right: 1px solid #e0e0e0;\n  }\n\n  span:nth-child(2) {\n    padding-left: 8px;\n  }\n"])),(function(e){return e.top}),(function(e){return e.isBid?"left: 5px":"right: 5px"}));function k(e){if(!e.quote)return null;var n=27*(Number(e.currentIndex)+1)+84;return Object(h.jsxs)(B,{top:n,isBid:e.isBid,children:[Object(h.jsxs)("span",{children:["Average Price: ",f(e.quote.avg)]}),Object(h.jsxs)("span",{children:["Total: ",f(e.quote.culmulativeTotal)," ",e.currency]})]})}var S,T,q,z=p.b.div(m||(m=Object(d.a)(["\n  width: 100%;\n"]))),C=p.b.table(y||(y=Object(d.a)(["\n  width: 100%;\n  display: table;\n  border-spacing: 0;\n  border-collapse: collapse;\n  font-size: 16px;\n  font-weight: 300;\n"]))),N=p.b.th(w||(w=Object(d.a)(["\n  color: rgba(0, 0, 0, 0.54);\n  white-space: nowrap;\n  padding: 8px 16px;\n  text-align: ",";\n  background: white;\n  position: sticky;\n  top: 0;\n  z-index: 1;\n"])),(function(e){return e.isBid?"right":"left"}));function E(e){var n=e.quoteType,t=e.quote,i=e.symbol,o=e.maxOrderSize,c=Object(r.useState)(!1),s=Object(u.a)(c,2),a=s[0],l=s[1],d=Object(r.useState)(null),b=Object(u.a)(d,2),p=b[0],j=b[1],f=Object(r.useState)(null),O=Object(u.a)(f,2),g=O[0],m=O[1],y=Object(r.useRef)(null);Object(r.useEffect)((function(){y.current=t}));var w=y.current,B=i.split("-"),S=Object(u.a)(B,2),T=S[0],q=S[1],E="buy"===n,F="".concat(E?"Bid":"Ask"," Price(").concat(q,")"),L="".concat(E?"Bid":"Ask"," Size(").concat(T,")"),M=function(e){return function(){l(!0),m(e)}},A=function(){l(!1),m(null)};Object(r.useEffect)((function(){j(t[g]?t[g]:null)}),[g,t]);var I=Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)(N,{isBid:E,children:E?L:F}),Object(h.jsx)(N,{isBid:E,children:E?F:L})]})}),D=function(e,n){var t,i;return w&&(e.size!==(null===(t=w[n])||void 0===t?void 0:t.size)||e.price!==(null===(i=w[n])||void 0===i?void 0:i.price))};return Object(h.jsxs)(z,{onMouseLeave:A,children:[a&&Object(h.jsx)(k,{isBid:E,quote:p,currentIndex:g}),Object(h.jsxs)(C,{children:[I,Object(h.jsx)("tbody",{children:t.map((function(e,n){return function(e,n){return Object(h.jsx)(v,{quote:e,isBid:E,isChanged:D(e,n),percent:(t=e.culmulativeTotal,x()(100).times(t).div(o).toString()),handleMouseEnter:M(n),handleMouseLeave:A},"buy-".concat(n));var t}(e,n)}))})]})]})}var F=p.b.div(S||(S=Object(d.a)(["\n  border-radius: 4px;\n  border: 1px solid #e0e0e0;\n  box-shadow: #e0e0e0 2px 2px;\n  max-width: 100%;\n  position: relative;\n"]))),L=p.b.div(T||(T=Object(d.a)(["\n  text-align: center;\n  padding: 16px 0;\n  background: white;\n  position: sticky;\n  top: 0;\n  z-index: 1;\n"]))),M=p.b.div(q||(q=Object(d.a)(["\n  display: flex;\n  //height: calc(100vh - 70px);\n  //overflow: scroll;\n"])));function A(e){var n=e.data,t=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;if(!n)return{};var i=0,o=x()(0);return n.sort((function(n,t){return"buy"===e?t.price-n.price:n.price-t.price})).slice(0,t-1).map((function(e){var n=x()(e.price).times(e.size);o=o.plus(n);var t=x()(e.size).plus(i),c=x()(o).div(t),r=Object(b.a)(Object(b.a)({},e),{},{culmulativeTotal:t.toFixed(4),avg:c.toFixed(4)});return i+=Number(e.size),r}))},i=t("buy",null===n||void 0===n?void 0:n.buyQuote),o=t("sell",null===n||void 0===n?void 0:n.sellQuote),c=n?Math.max(Number(i[i.length-1].culmulativeTotal),Number(o[o.length-1].culmulativeTotal)):0;return n?Object(h.jsxs)(F,{children:[Object(h.jsxs)(L,{children:[n.symbol," Order Book (source: BTSE spot websocket data)"]}),Object(h.jsxs)(M,{children:[Object(h.jsx)(E,{quoteType:"buy",quote:i,symbol:n.symbol,maxOrderSize:c}),Object(h.jsx)(E,{quoteType:"sell",quote:o,symbol:n.symbol,maxOrderSize:c})]})]}):null}var I,D,J,P,Q="USDT",R={BTSE:"BTSE",BTC:"BTC"},U=p.b.div(I||(I=Object(d.a)(["\n  display: flex;\n  background: #1c2230;\n  color: rgba(255, 255, 255, 0.7);\n"]))),W=p.b.div(D||(D=Object(d.a)(["\n  padding: 6px 10px;\n  cursor: pointer;\n"])));function _(e){var n=e.setBaseCurrency;return Object(h.jsx)(U,{children:Object.keys(R).map((function(e){return Object(h.jsxs)(W,{onClick:function(){return n(e)},children:[e,"-",Q]},e)}))})}var G=p.b.div(J||(J=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),H=p.b.div(P||(P=Object(d.a)(["\n  display: flex;\n  justify-content: center;\n  padding: 10px;\n"])));var K,V=function(){var e=Object(r.useState)(R.BTSE),n=Object(u.a)(e,2),t=n[0],i=n[1],o=Object(r.useState)(null),c=Object(u.a)(o,2),s=c[0],a=c[1];return Object(r.useEffect)((function(){var e=new WebSocket("wss://ws.btse.com/ws/spot");e.onopen=function(){console.log("websocket is open now"),e.send(JSON.stringify({op:"subscribe",args:["orderBookL2Api:BTC-".concat(Q,"_0")]}))},e.onmessage=function(e){var n=JSON.parse(e.data);a(n.data)},e.onclose=function(){console.log("websocket is closed")},e.onerror=function(e){console.log(e)}}),[]),Object(h.jsxs)(G,{children:[Object(h.jsx)(_,{setBaseCurrency:i}),Object(h.jsx)("p",{children:t}),Object(h.jsx)(H,{children:Object(h.jsx)(A,{data:s,baseCurrency:t})})]})},X=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,24)).then((function(n){var t=n.getCLS,i=n.getFID,o=n.getFCP,c=n.getLCP,r=n.getTTFB;t(e),i(e),o(e),c(e),r(e)}))},Y=Object(p.a)(K||(K=Object(d.a)(["\n  @import url('https://fonts.googleapis.com/css2?family=Lato:wght@100;300;400;700;900&display=swap');\n  @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@100;400&display=swap');\n  body {\n    font-family: 'Lato', 'Noto Sans TC', sans-serif ;\n    margin:0 ;\n    padding: 0;\n  }\n"])));l.a.render(Object(h.jsxs)(s.a.StrictMode,{children:[Object(h.jsx)(Y,{}),Object(h.jsx)(V,{})]}),document.getElementById("root")),X()}},[[23,1,2]]]);
//# sourceMappingURL=main.2f8eedbb.chunk.js.map