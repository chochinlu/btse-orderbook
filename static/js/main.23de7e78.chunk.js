(this["webpackJsonpftx-look-orderbook"]=this["webpackJsonpftx-look-orderbook"]||[]).push([[0],{19:function(e,n,t){},23:function(e,n,t){"use strict";t.r(n);var c,i,o,r=t(0),s=t.n(r),a=t(11),l=t.n(a),u=t(4),d=t(2),b=t(9),p=t(3),j=t(5),x=t.n(j),f=(t(19),function(e){return Number(e).toLocaleString(void 0,{minimumFractionDigits:4})}),O=t(1),h=p.b.span(c||(c=Object(d.a)(["\n  font-weight: bold;\n  color: #ff3b69;\n"]))),g=p.b.span(i||(i=Object(d.a)(["\n  font-weight: bold;\n  color: #02c77a;\n"])));function v(e){var n=e.isBid?"left":"right",t=e.isBid?"rgba(2, 199, 122, 0.25)":"rgba(255, 59, 105, 0.25)",c=e.isBid?"buyFlash":"sellFlash",i={backgroundImage:"linear-gradient(\n            to ".concat(n,",\n            ").concat(t,",\n            ").concat(t," ").concat(e.percent,"%,\n            rgba(0, 0, 0, 0) ").concat(e.percent,"%\n        "),animationName:e.isChanged?c:"none",animationDuration:"0.2s"},o={textAlign:e.isBid?"right":"left"};return Object(O.jsxs)("tr",{className:"row",style:i,onMouseEnter:function(){e.handleMouseEnter(e.quote)},children:[Object(O.jsx)("td",{className:"cell",style:o,children:e.isBid?f(e.quote.size):Object(O.jsx)(h,{children:f(e.quote.price)})}),Object(O.jsx)("td",{className:"cell",style:o,children:e.isBid?Object(O.jsx)(g,{children:f(e.quote.price)}):f(e.quote.size)})]})}var m,y,w,B=p.b.div(o||(o=Object(d.a)(["\n  display: inline-block;\n  padding: 8px 16px;\n  border: 1px solid #e0e0e0;\n  //box-shadow: #e0e0e0 2px 2px 2px 2px;\n  //box-shadow: 5px 8px 24px 5px rgba(224, 224, 224, 1);\n  box-shadow: 2px 3px 11px 7px rgba(224, 224, 224, 0.5);\n  font-size: 12px;\n\n  background: white;\n  position: absolute;\n  top: ","px;\n  ",";\n  z-index: 2;\n\n  span:first-child {\n    padding-right: 8px;\n    border-right: 1px solid #e0e0e0;\n  }\n\n  span:nth-child(2) {\n    padding-left: 8px;\n  }\n"])),(function(e){return e.top}),(function(e){return e.isBid?"left: 5px":"right: 5px"}));function k(e){if(!e.quote)return null;var n=27*(Number(e.currentIndex)+1)+84;return Object(O.jsxs)(B,{top:n,isBid:e.isBid,children:[Object(O.jsxs)("span",{children:["Average Price: ",f(e.quote.avg)]}),Object(O.jsxs)("span",{children:["Total: ",f(e.quote.culmulativeTotal)," ",e.currency]})]})}var S,T,q,z=p.b.div(m||(m=Object(d.a)(["\n  width: 100%;\n"]))),N=p.b.table(y||(y=Object(d.a)(["\n  width: 100%;\n  display: table;\n  border-spacing: 0;\n  border-collapse: collapse;\n  font-size: 16px;\n  font-weight: 300;\n"]))),C=p.b.th(w||(w=Object(d.a)(["\n  color: rgba(0, 0, 0, 0.54);\n  white-space: nowrap;\n  padding: 8px 16px;\n  text-align: ",";\n  background: white;\n  position: sticky;\n  top: 0;\n  z-index: 1;\n"])),(function(e){return e.isBid?"right":"left"}));function E(e){var n=e.quoteType,t=e.quote,c=e.symbol,i=e.maxOrderSize,o=Object(r.useState)(!1),s=Object(u.a)(o,2),a=s[0],l=s[1],d=Object(r.useState)(null),b=Object(u.a)(d,2),p=b[0],j=b[1],f=Object(r.useState)(null),h=Object(u.a)(f,2),g=h[0],m=h[1],y=Object(r.useRef)(null);Object(r.useEffect)((function(){y.current=t}));var w=y.current,B=c.split("-"),S=Object(u.a)(B,2),T=S[0],q=S[1],E="buy"===n,L="".concat(E?"Bid":"Ask"," Price(").concat(q,")"),F="".concat(E?"Bid":"Ask"," Size(").concat(T,")"),A=function(e){return function(){l(!0),m(e)}},M=function(){l(!1),m(null)};Object(r.useEffect)((function(){j(t[g]?t[g]:null)}),[g,t]);var J=Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)(C,{isBid:E,children:E?F:L}),Object(O.jsx)(C,{isBid:E,children:E?L:F})]})}),I=function(e,n){var t,c;return w&&(e.size!==(null===(t=w[n])||void 0===t?void 0:t.size)||e.price!==(null===(c=w[n])||void 0===c?void 0:c.price))};return Object(O.jsxs)(z,{onMouseLeave:M,children:[a&&Object(O.jsx)(k,{isBid:E,quote:p,currentIndex:g}),Object(O.jsxs)(N,{children:[J,Object(O.jsx)("tbody",{children:t.map((function(e,n){return function(e,n){return Object(O.jsx)(v,{quote:e,isBid:E,isChanged:I(e,n),percent:(t=e.culmulativeTotal,x()(100).times(t).div(i).toString()),handleMouseEnter:A(n),handleMouseLeave:M},"buy-".concat(n));var t}(e,n)}))})]})]})}var L=p.b.div(S||(S=Object(d.a)(["\n  border-radius: 4px;\n  border: 1px solid #e0e0e0;\n  box-shadow: #e0e0e0 2px 2px;\n  max-width: 100%;\n  position: relative;\n"]))),F=p.b.div(T||(T=Object(d.a)(["\n  text-align: center;\n  padding: 16px 0;\n  background: white;\n  position: sticky;\n  top: 0;\n  z-index: 1;\n"]))),A=p.b.div(q||(q=Object(d.a)(["\n  display: flex;\n  //height: calc(100vh - 70px);\n  //overflow: scroll;\n"])));function M(e){var n=e.data,t=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;if(!n)return{};var c=0,i=x()(0);return n.sort((function(n,t){return"buy"===e?t.price-n.price:n.price-t.price})).slice(0,t-1).map((function(e){var n=x()(e.price).times(e.size);i=i.plus(n);var t=x()(e.size).plus(c),o=x()(i).div(t),r=Object(b.a)(Object(b.a)({},e),{},{culmulativeTotal:t.toFixed(4),avg:o.toFixed(4)});return c+=Number(e.size),r}))},c=t("buy",null===n||void 0===n?void 0:n.buyQuote),i=t("sell",null===n||void 0===n?void 0:n.sellQuote),o=n?Math.max(Number(c[c.length-1].culmulativeTotal),Number(i[i.length-1].culmulativeTotal)):0;return n?Object(O.jsxs)(L,{children:[Object(O.jsxs)(F,{children:[n.symbol," Order Book (source: BTSE spot websocket data)"]}),Object(O.jsxs)(A,{children:[Object(O.jsx)(E,{quoteType:"buy",quote:c,symbol:n.symbol,maxOrderSize:o}),Object(O.jsx)(E,{quoteType:"sell",quote:i,symbol:n.symbol,maxOrderSize:o})]})]}):null}var J,I,D,P,R="USDT",_={BTSE:"BTSE",BTC:"BTC"},Q=p.b.div(J||(J=Object(d.a)(["\n  display: flex;\n  background: #1c2230;\n  color: rgba(255, 255, 255, 0.7);\n"]))),U=p.b.div(I||(I=Object(d.a)(["\n  padding: 6px 10px;\n  cursor: pointer;\n"])));function W(e){var n=e.setBaseCurrency;return Object(O.jsx)(Q,{children:Object.keys(_).map((function(e){return Object(O.jsxs)(U,{onClick:function(){return n(e)},children:[e,"-",R]},e)}))})}var G=p.b.div(D||(D=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),H=p.b.div(P||(P=Object(d.a)(["\n  display: flex;\n  justify-content: center;\n  padding: 10px;\n"])));var K,V=function(){var e=Object(r.useState)(_.BTSE),n=Object(u.a)(e,2),t=n[0],c=n[1],i=Object(r.useState)(null),o=Object(u.a)(i,2),s=o[0],a=o[1],l=Object(r.useRef)();Object(r.useEffect)((function(){l.current=t}));var d=l.current,b=Object(r.useRef)();return Object(r.useEffect)((function(){var e=new WebSocket("wss://ws.btse.com/ws/spot");e.onopen=function(){console.log("websocket is open now"),e.send(JSON.stringify({op:"subscribe",args:["orderBookL2Api:".concat(t,"-").concat(R,"_0")]}))},e.onmessage=function(e){var n=JSON.parse(e.data);a(n.data)},e.onclose=function(){console.log("websocket is closed")},e.onerror=function(e){console.log(e)},b.current=e}),[]),Object(r.useEffect)((function(){1===b.current.readyState&&(b.current.send(JSON.stringify({op:"unsubscribe",args:["orderBookL2Api:".concat(d,"-").concat(R,"_0")]})),b.current.send(JSON.stringify({op:"subscribe",args:["orderBookL2Api:".concat(t,"-").concat(R,"_0")]})))}),[t,d]),Object(O.jsxs)(G,{children:[Object(O.jsx)(W,{setBaseCurrency:c}),Object(O.jsx)(H,{children:Object(O.jsx)(M,{data:s,baseCurrency:t})})]})},X=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,24)).then((function(n){var t=n.getCLS,c=n.getFID,i=n.getFCP,o=n.getLCP,r=n.getTTFB;t(e),c(e),i(e),o(e),r(e)}))},Y=Object(p.a)(K||(K=Object(d.a)(["\n  @import url('https://fonts.googleapis.com/css2?family=Lato:wght@100;300;400;700;900&display=swap');\n  @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@100;400&display=swap');\n  body {\n    font-family: 'Lato', 'Noto Sans TC', sans-serif ;\n    margin:0 ;\n    padding: 0;\n  }\n"])));l.a.render(Object(O.jsxs)(s.a.StrictMode,{children:[Object(O.jsx)(Y,{}),Object(O.jsx)(V,{})]}),document.getElementById("root")),X()}},[[23,1,2]]]);
//# sourceMappingURL=main.23de7e78.chunk.js.map