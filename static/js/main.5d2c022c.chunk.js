(this["webpackJsonpftx-look-orderbook"]=this["webpackJsonpftx-look-orderbook"]||[]).push([[0],{19:function(e,n,t){},23:function(e,n,t){"use strict";t.r(n);var i,o,c,s=t(0),r=t.n(s),a=t(11),l=t.n(a),u=t(5),d=t(2),b=t(9),p=t(3),j=t(4),x=t.n(j),h=(t(19),function(e){return Number(e).toLocaleString(void 0,{minimumFractionDigits:4})}),f=t(1),g=p.b.span(i||(i=Object(d.a)(["\n  font-weight: bold;\n  color: #ff3b69;\n"]))),O=p.b.span(o||(o=Object(d.a)(["\n  font-weight: bold;\n  color: #02c77a;\n"])));function v(e){var n=e.isBid?"left":"right",t=e.isBid?"rgba(2, 199, 122, 0.25)":"rgba(255, 59, 105, 0.25)",i=e.isBid?"buyFlash":"sellFlash",o={backgroundImage:"linear-gradient(\n            to ".concat(n,",\n            ").concat(t,",\n            ").concat(t," ").concat(e.percent,"%,\n            rgba(0, 0, 0, 0) ").concat(e.percent,"%\n        "),animationName:e.isChanged?i:"none",animationDuration:"0.2s"},c={textAlign:e.isBid?"right":"left"};return Object(f.jsxs)("tr",{className:"row",style:o,onMouseEnter:function(){e.handleMouseEnter(e.quote)},children:[Object(f.jsx)("td",{className:"cell",style:c,children:e.isBid?h(e.quote.size):Object(f.jsx)(g,{children:h(e.quote.price)})}),Object(f.jsx)("td",{className:"cell",style:c,children:e.isBid?Object(f.jsx)(O,{children:h(e.quote.price)}):h(e.quote.size)})]})}var m,y,w,B=p.b.div(c||(c=Object(d.a)(["\n  display: inline-block;\n  padding: 8px 16px;\n  border: 1px solid #e0e0e0;\n  //box-shadow: #e0e0e0 2px 2px 2px 2px;\n  //box-shadow: 5px 8px 24px 5px rgba(224, 224, 224, 1);\n  box-shadow: 2px 3px 11px 7px rgba(224, 224, 224, 0.5);\n  font-size: 12px;\n\n  background: white;\n  position: absolute;\n  top: ","px;\n  ",";\n  z-index: 2;\n\n  span:first-child {\n    padding-right: 8px;\n    border-right: 1px solid #e0e0e0;\n  }\n\n  span:nth-child(2) {\n    padding-left: 8px;\n  }\n"])),(function(e){return e.top}),(function(e){return e.isBid?"left: 5px":"right: 5px"}));function k(e){var n=27*(Number(e.currentIndex)+1)+84;return Object(f.jsxs)(B,{top:n,isBid:e.isBid,children:[Object(f.jsxs)("span",{children:["Average Price: ",h(e.quote.avg)]}),Object(f.jsxs)("span",{children:["Total: ",h(e.quote.culmulativeTotal)," ",e.currency]})]})}var S,z,T,q=p.b.div(m||(m=Object(d.a)(["\n  width: 100%;\n"]))),N=p.b.table(y||(y=Object(d.a)(["\n  width: 100%;\n  display: table;\n  border-spacing: 0;\n  border-collapse: collapse;\n  font-size: 16px;\n  font-weight: 300;\n"]))),F=p.b.th(w||(w=Object(d.a)(["\n  color: rgba(0, 0, 0, 0.54);\n  white-space: nowrap;\n  padding: 8px 16px;\n  text-align: ",";\n  background: white;\n  position: sticky;\n  top: 0;\n  z-index: 1;\n"])),(function(e){return e.isBid?"right":"left"}));function E(e){var n=e.quoteType,t=e.quote,i=e.symbol,o=e.maxOrderSize,c=Object(s.useState)(!1),r=Object(u.a)(c,2),a=r[0],l=r[1],d=Object(s.useState)(null),b=Object(u.a)(d,2),p=b[0],j=b[1],h=Object(s.useState)(null),g=Object(u.a)(h,2),O=g[0],m=g[1],y=Object(s.useRef)(null);Object(s.useEffect)((function(){y.current=t}));var w=y.current,B=i.split("-"),S=Object(u.a)(B,2),z=S[0],T=S[1],E="buy"===n,L="".concat(E?"Bid":"Ask"," Price(").concat(T,")"),C="".concat(E?"Bid":"Ask"," Size(").concat(z,")"),M=function(e){return function(n){l(!0),j(n),m(e)}},A=function(){l(!1),j(null),m(null)},I=Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)(F,{isBid:E,children:E?C:L}),Object(f.jsx)(F,{isBid:E,children:E?L:C})]})}),D=function(e,n){var t,i;return w&&(e.size!==(null===(t=w[n])||void 0===t?void 0:t.size)||e.price!==(null===(i=w[n])||void 0===i?void 0:i.price))};return Object(f.jsxs)(q,{onMouseLeave:A,children:[a&&Object(f.jsx)(k,{isBid:E,quote:p,currentIndex:O}),Object(f.jsxs)(N,{children:[I,Object(f.jsx)("tbody",{children:t.map((function(e,n){return function(e,n){return Object(f.jsx)(v,{quote:e,isBid:E,isChanged:D(e,n),percent:(t=e.culmulativeTotal,x()(100).times(t).div(o).toString()),handleMouseEnter:M(n),handleMouseLeave:A},"buy-".concat(n));var t}(e,n)}))})]})]})}var L,C=p.b.div(S||(S=Object(d.a)(["\n  border-radius: 4px;\n  border: 1px solid #e0e0e0;\n  box-shadow: #e0e0e0 2px 2px;\n  max-width: 100%;\n  position: relative;\n"]))),M=p.b.div(z||(z=Object(d.a)(["\n  text-align: center;\n  padding: 16px 0;\n  background: white;\n  position: sticky;\n  top: 0;\n  z-index: 1;\n"]))),A=p.b.div(T||(T=Object(d.a)(["\n  display: flex;\n  //height: calc(100vh - 70px);\n  //overflow: scroll;\n"])));function I(e){var n=e.data,t=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;if(!n)return{};var i=0,o=x()(0);return n.sort((function(n,t){return"buy"===e?t.price-n.price:n.price-t.price})).slice(0,t-1).map((function(e){var n=x()(e.price).times(e.size);o=o.plus(n);var t=x()(e.size).plus(i),c=x()(o).div(t),s=Object(b.a)(Object(b.a)({},e),{},{culmulativeTotal:t.toFixed(4),avg:c.toFixed(4)});return i+=Number(e.size),s}))},i=t("buy",null===n||void 0===n?void 0:n.buyQuote),o=t("sell",null===n||void 0===n?void 0:n.sellQuote),c=n?Math.max(Number(i[i.length-1].culmulativeTotal),Number(o[o.length-1].culmulativeTotal)):0;return n?Object(f.jsxs)(C,{children:[Object(f.jsxs)(M,{children:[n.symbol," Order Book (source: BTSE spot websocket data)"]}),Object(f.jsxs)(A,{children:[Object(f.jsx)(E,{quoteType:"buy",quote:i,symbol:n.symbol,maxOrderSize:c}),Object(f.jsx)(E,{quoteType:"sell",quote:o,symbol:n.symbol,maxOrderSize:c})]})]}):null}var D=p.b.div(L||(L=Object(d.a)(["\n  display: flex;\n  justify-content: center;\n"])));var J,P=function(){var e=Object(s.useState)(null),n=Object(u.a)(e,2),t=n[0],i=n[1];return Object(s.useEffect)((function(){var e=new WebSocket("wss://ws.btse.com/ws/spot");e.onopen=function(){console.log("websocket is open now"),e.send(JSON.stringify({op:"subscribe",args:["orderBookL2Api:BTSE-USDT_0"]}))},e.onmessage=function(e){var n=JSON.parse(e.data);i(n.data)},e.onclose=function(){console.log("websocket is closed")},e.onerror=function(e){console.log(e)}}),[]),Object(f.jsx)(D,{children:Object(f.jsx)(I,{data:t})})},Q=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,24)).then((function(n){var t=n.getCLS,i=n.getFID,o=n.getFCP,c=n.getLCP,s=n.getTTFB;t(e),i(e),o(e),c(e),s(e)}))},R=Object(p.a)(J||(J=Object(d.a)(["\n  @import url('https://fonts.googleapis.com/css2?family=Lato:wght@100;300;400;700;900&display=swap');\n  @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@100;400&display=swap');\n  body {\n    font-family: 'Lato', 'Noto Sans TC', sans-serif ;\n  }\n"])));l.a.render(Object(f.jsxs)(r.a.StrictMode,{children:[Object(f.jsx)(R,{}),Object(f.jsx)(P,{})]}),document.getElementById("root")),Q()}},[[23,1,2]]]);
//# sourceMappingURL=main.5d2c022c.chunk.js.map