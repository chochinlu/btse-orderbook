(this["webpackJsonpftx-look-orderbook"]=this["webpackJsonpftx-look-orderbook"]||[]).push([[0],{19:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var o,i,c,r,s,a=n(0),l=n.n(a),b=n(11),d=n.n(b),u=n(6),j=n(2),p=n(9),h=n(3),f=n(4),g=n.n(f),x=(n(19),n(1)),O=h.b.span(o||(o=Object(j.a)(["\n  font-weight: bold;\n  color: #ff3b69;\n"]))),m=h.b.span(i||(i=Object(j.a)(["\n  font-weight: bold;\n  color: #02c77a;\n"])));function v(e){var t=e.isBid?"left":"right",n=e.isBid?"rgba(2, 199, 122, 0.25)":"rgba(255, 59, 105, 0.25)",o=e.isBid?"buyFlash":"sellFlash",i={backgroundImage:"linear-gradient(\n            to ".concat(t,",\n            ").concat(n,",\n            ").concat(n," ").concat(e.percent,"%,\n            rgba(0, 0, 0, 0) ").concat(e.percent,"%\n        "),animationName:e.isChanged?o:"none",animationDuration:"0.2s"},c={textAlign:e.isBid?"right":"left"};return Object(x.jsxs)("tr",{className:"row",style:i,children:[Object(x.jsx)("td",{className:"cell",style:c,children:e.isBid?Number(e.quote.size).toLocaleString():Object(x.jsx)(O,{children:Number(e.quote.price).toLocaleString()})}),Object(x.jsx)("td",{className:"cell",style:c,children:e.isBid?Object(x.jsx)(m,{children:Number(e.quote.price).toLocaleString()}):Number(e.quote.size).toLocaleString()})]})}var y,w,S,k=h.b.div(c||(c=Object(j.a)(["\n  width: 100%;\n"]))),B=h.b.table(r||(r=Object(j.a)(["\n  width: 100%;\n  display: table;\n  border-spacing: 0;\n  border-collapse: collapse;\n  font-size: 16px;\n  font-weight: 300;\n"]))),N=h.b.th(s||(s=Object(j.a)(["\n  color: rgba(0, 0, 0, 0.54);\n  white-space: nowrap;\n  padding: 8px 16px;\n  text-align: ",";\n  background: white;\n  position: sticky;\n  top: 0;\n  z-index: 1;\n"])),(function(e){return e.isBid?"right":"left"}));function T(e){var t=e.quoteType,n=e.quote,o=e.symbol,i=e.maxOrderSize,c=Object(a.useRef)(null);Object(a.useEffect)((function(){c.current=n}));var r=c.current,s=o.split("-"),l=Object(u.a)(s,2),b=l[0],d=l[1],j="buy"===t,p="".concat(j?"Bid":"Ask"," Price(").concat(d,")"),h="".concat(j?"Bid":"Ask"," Size(").concat(b,")"),f=Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)(N,{isBid:j,children:j?h:p}),Object(x.jsx)(N,{isBid:j,children:j?p:h})]})}),O=function(e,t){var n,o;return r&&(e.size!==(null===(n=r[t])||void 0===n?void 0:n.size)||e.price!==(null===(o=r[t])||void 0===o?void 0:o.price))};return Object(x.jsx)(k,{children:Object(x.jsxs)(B,{children:[f,Object(x.jsx)("tbody",{children:n.map((function(e,t){return function(e,t){return Object(x.jsx)(v,{quote:e,isBid:j,isChanged:O(e,t),percent:(n=e.culmulativeTotal,g()(100).times(n).div(i).toString())},"buy-".concat(t));var n}(e,t)}))})]})})}var z,q=h.b.div(y||(y=Object(j.a)(["\n  border-radius: 4px;\n  border: 1px solid #e0e0e0;\n  box-shadow: #e0e0e0 2px 2px;\n  max-width: 100%;\n  position: relative;\n"]))),L=h.b.div(w||(w=Object(j.a)(["\n  text-align: center;\n  padding: 16px 0;\n  background: white;\n  position: sticky;\n  top: 0;\n  z-index: 1;\n"]))),C=h.b.div(S||(S=Object(j.a)(["\n  display: flex;\n  height: calc(100vh - 70px);\n  overflow: scroll;\n"])));function F(e){var t=e.data,n=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;if(!t)return{};var o=0;return t.sort((function(t,n){return"buy"===e?n.price-t.price:t.price-n.price})).slice(0,n-1).map((function(e){var t=Object(p.a)(Object(p.a)({},e),{},{culmulativeTotal:g()(e.size).plus(o).toFixed(4)});return o+=Number(e.size),t}))},o=n("buy",null===t||void 0===t?void 0:t.buyQuote),i=n("sell",null===t||void 0===t?void 0:t.sellQuote),c=t?Math.max(Number(o[o.length-1].culmulativeTotal),Number(i[i.length-1].culmulativeTotal)):0;return t?Object(x.jsxs)(q,{children:[Object(x.jsxs)(L,{children:[t.symbol," Order Book (source: BTSE spot websocket data)"]}),Object(x.jsxs)(C,{children:[Object(x.jsx)(T,{quoteType:"buy",quote:o,symbol:t.symbol,maxOrderSize:c}),Object(x.jsx)(T,{quoteType:"sell",quote:i,symbol:t.symbol,maxOrderSize:c})]})]}):null}var E=h.b.div(z||(z=Object(j.a)(["\n  display: flex;\n  justify-content: center;\n"])));var A,J=function(){var e=Object(a.useState)(null),t=Object(u.a)(e,2),n=t[0],o=t[1];return Object(a.useEffect)((function(){var e=new WebSocket("wss://ws.btse.com/ws/spot");e.onopen=function(){console.log("websocket is open now"),e.send(JSON.stringify({op:"subscribe",args:["orderBookL2Api:BTSE-USDT_0"]}))},e.onmessage=function(e){var t=JSON.parse(e.data);o(t.data)},e.onclose=function(){console.log("websocket is closed")},e.onerror=function(e){console.log(e)}}),[]),Object(x.jsx)(E,{children:Object(x.jsx)(F,{data:n})})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,24)).then((function(t){var n=t.getCLS,o=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),o(e),i(e),c(e),r(e)}))},I=Object(h.a)(A||(A=Object(j.a)(["\n  @import url('https://fonts.googleapis.com/css2?family=Lato:wght@100;300;400;700;900&display=swap');\n  @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@100;400&display=swap');\n  body {\n    font-family: 'Lato', 'Noto Sans TC', sans-serif ;\n  }\n"])));d.a.render(Object(x.jsxs)(l.a.StrictMode,{children:[Object(x.jsx)(I,{}),Object(x.jsx)(J,{})]}),document.getElementById("root")),D()}},[[23,1,2]]]);
//# sourceMappingURL=main.23b222dd.chunk.js.map