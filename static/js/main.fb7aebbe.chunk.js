(this["webpackJsonpftx-look-orderbook"]=this["webpackJsonpftx-look-orderbook"]||[]).push([[0],{20:function(e,n,t){},24:function(e,n,t){"use strict";t.r(n);var c,i,o,r=t(0),s=t.n(r),a=t(12),u=t.n(a),l=t(4),d=t(2),b=t(10),p=t(3),j=t(5),x=t.n(j),f=(t(20),function(e){return Number(e).toLocaleString(void 0,{minimumFractionDigits:4})}),O=t(8),g=t.n(O),h=t(1),v=p.b.span(c||(c=Object(d.a)(["\n  font-weight: bold;\n  color: #ff3b69;\n"]))),m=p.b.span(i||(i=Object(d.a)(["\n  font-weight: bold;\n  color: #02c77a;\n"])));function y(e){var n=e.isBid?"left":"right",t=e.isBid?"rgba(2, 199, 122, 0.25)":"rgba(255, 59, 105, 0.25)",c={backgroundImage:"linear-gradient(\n            to ".concat(n,",\n            ").concat(t,",\n            ").concat(t," ").concat(e.percent,"%,\n            rgba(0, 0, 0, 0) ").concat(e.percent,"%\n        ")},i=function(){return g()("cell",{tl:!e.isBid,tr:e.isBid})};return Object(h.jsxs)("tr",{className:g()("row",{"buy-animation":e.isChanged&&e.isBid,"sell-animation":e.isChanged&&!e.isBid}),style:c,onMouseEnter:function(){e.handleMouseEnter(e.quote)},children:[Object(h.jsx)("td",{className:i(),children:e.isBid?f(e.quote.size):Object(h.jsx)(v,{children:f(e.quote.price)})}),Object(h.jsx)("td",{className:i(),children:e.isBid?Object(h.jsx)(m,{children:f(e.quote.price)}):f(e.quote.size)})]})}var B,w,k,S=p.b.div(o||(o=Object(d.a)(["\n  display: inline-block;\n  padding: 8px 16px;\n  border: 1px solid #e0e0e0;\n  //box-shadow: #e0e0e0 2px 2px 2px 2px;\n  //box-shadow: 5px 8px 24px 5px rgba(224, 224, 224, 1);\n  box-shadow: 2px 3px 11px 7px rgba(224, 224, 224, 0.5);\n  font-size: 12px;\n\n  background: white;\n  position: absolute;\n  top: ","px;\n  ",";\n  z-index: 2;\n\n  span:first-child {\n    padding-right: 8px;\n    border-right: 1px solid #e0e0e0;\n  }\n\n  span:nth-child(2) {\n    padding-left: 8px;\n  }\n"])),(function(e){return e.top}),(function(e){return e.isBid?"left: 5px":"right: 5px"}));function T(e){if(!e.quote)return null;var n=27*(Number(e.currentIndex)+1)+84;return Object(h.jsxs)(S,{top:n,isBid:e.isBid,children:[Object(h.jsxs)("span",{children:["Average Price: ",f(e.quote.avg)]}),Object(h.jsxs)("span",{children:["Total: ",f(e.quote.culmulativeTotal)," ",e.currency]})]})}var q,z,E,C=p.b.div(B||(B=Object(d.a)(["\n  width: 100%;\n"]))),N=p.b.table(w||(w=Object(d.a)(["\n  width: 100%;\n  display: table;\n  border-spacing: 0;\n  border-collapse: collapse;\n  font-size: 16px;\n  font-weight: 300;\n"]))),L=p.b.th(k||(k=Object(d.a)(["\n  color: rgba(0, 0, 0, 0.54);\n  white-space: nowrap;\n  padding: 8px 16px;\n  text-align: ",";\n  background: white;\n  position: sticky;\n  top: 0;\n  z-index: 1;\n"])),(function(e){return e.isBid?"right":"left"}));function F(e){var n=e.quoteType,t=e.quote,c=e.symbol,i=e.maxOrderSize,o=Object(r.useState)(!1),s=Object(l.a)(o,2),a=s[0],u=s[1],d=Object(r.useState)(null),b=Object(l.a)(d,2),p=b[0],j=b[1],f=Object(r.useState)(null),O=Object(l.a)(f,2),g=O[0],v=O[1],m=Object(r.useRef)(null);Object(r.useEffect)((function(){m.current=t}));var B=m.current,w=c.split("-"),k=Object(l.a)(w,2),S=k[0],q=k[1],z="buy"===n,E="".concat(z?"Bid":"Ask"," Price(").concat(q,")"),F="".concat(z?"Bid":"Ask"," Size(").concat(S,")"),M=function(e){return function(){u(!0),v(e)}},A=function(){u(!1),v(null)};Object(r.useEffect)((function(){j(t[g]?t[g]:null)}),[g,t]);var J=Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)(L,{isBid:z,children:z?F:E}),Object(h.jsx)(L,{isBid:z,children:z?E:F})]})}),I=function(e,n){var t;return B&&e.size!==(null===(t=B[n])||void 0===t?void 0:t.size)};return Object(h.jsxs)(C,{onMouseLeave:A,children:[a&&Object(h.jsx)(T,{isBid:z,quote:p,currentIndex:g}),Object(h.jsxs)(N,{children:[J,Object(h.jsx)("tbody",{children:t.map((function(e,n){return function(e,n){return Object(h.jsx)(y,{quote:e,isBid:z,isChanged:I(e,n),percent:(t=e.culmulativeTotal,x()(100).times(t).div(i).toString()),handleMouseEnter:M(n),handleMouseLeave:A},"buy-".concat(n));var t}(e,n)}))})]})]})}var M=p.b.div(q||(q=Object(d.a)(["\n  border-radius: 4px;\n  border: 1px solid #e0e0e0;\n  box-shadow: #e0e0e0 2px 2px;\n  max-width: 100%;\n  position: relative;\n"]))),A=p.b.div(z||(z=Object(d.a)(["\n  text-align: center;\n  padding: 16px 0;\n  background: white;\n  position: sticky;\n  top: 0;\n  z-index: 1;\n"]))),J=p.b.div(E||(E=Object(d.a)(["\n  display: flex;\n  //height: calc(100vh - 70px);\n  //overflow: scroll;\n"])));function I(e){var n=e.data,t=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;if(!n)return{};var c=0,i=x()(0);return n.sort((function(n,t){return"buy"===e?t.price-n.price:n.price-t.price})).slice(0,t-1).map((function(e){var n=x()(e.price).times(e.size);i=i.plus(n);var t=x()(e.size).plus(c),o=x()(i).div(t),r=Object(b.a)(Object(b.a)({},e),{},{culmulativeTotal:t.toFixed(4),avg:o.toFixed(4)});return c+=Number(e.size),r}))},c=t("buy",null===n||void 0===n?void 0:n.buyQuote),i=t("sell",null===n||void 0===n?void 0:n.sellQuote),o=n?Math.max(Number(c[c.length-1].culmulativeTotal),Number(i[i.length-1].culmulativeTotal)):0;return n?Object(h.jsxs)(M,{children:[Object(h.jsxs)(A,{children:[n.symbol," Order Book (source: BTSE spot websocket data)"]}),Object(h.jsxs)(J,{children:[Object(h.jsx)(F,{quoteType:"buy",quote:c,symbol:n.symbol,maxOrderSize:o}),Object(h.jsx)(F,{quoteType:"sell",quote:i,symbol:n.symbol,maxOrderSize:o})]})]}):null}var P,R,D,_,H="USDT",Q={BTSE:"BTSE",BTC:"BTC",ETH:"ETH"},U=p.b.div(P||(P=Object(d.a)(["\n  display: flex;\n  background: #1c2230;\n  color: rgba(255, 255, 255, 0.7);\n"]))),W=p.b.div(R||(R=Object(d.a)(["\n  padding: 6px 10px;\n  cursor: pointer;\n"])));function G(e){var n=e.setBaseCurrency;return Object(h.jsx)(U,{children:Object.keys(Q).map((function(e){return Object(h.jsxs)(W,{onClick:function(){return n(e)},children:[e,"-",H]},e)}))})}var K=p.b.div(D||(D=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),V=p.b.div(_||(_=Object(d.a)(["\n  display: flex;\n  justify-content: center;\n  padding: 10px;\n"])));var X,Y=function(){var e=Object(r.useState)(Q.BTSE),n=Object(l.a)(e,2),t=n[0],c=n[1],i=Object(r.useState)(null),o=Object(l.a)(i,2),s=o[0],a=o[1],u=Object(r.useRef)(!1),d=Object(r.useRef)();Object(r.useEffect)((function(){d.current=t}));var b=d.current,p=Object(r.useRef)();return Object(r.useEffect)((function(){if(!u.current){var e=new WebSocket("wss://ws.btse.com/ws/spot");e.onopen=function(){console.log("websocket is open now"),e.send(JSON.stringify({op:"subscribe",args:["orderBookL2Api:".concat(t,"-").concat(H,"_0")]}))},e.onmessage=function(e){var n=JSON.parse(e.data);a(n.data)},e.onclose=function(){console.log("websocket is closed")},e.onerror=function(e){console.log(e)},p.current=e,u.current=!0}}),[t]),Object(r.useEffect)((function(){1===p.current.readyState&&(p.current.send(JSON.stringify({op:"unsubscribe",args:["orderBookL2Api:".concat(b,"-").concat(H,"_0")]})),p.current.send(JSON.stringify({op:"subscribe",args:["orderBookL2Api:".concat(t,"-").concat(H,"_0")]})))}),[t,b]),Object(h.jsxs)(K,{children:[Object(h.jsx)(G,{setBaseCurrency:c}),Object(h.jsx)(V,{children:Object(h.jsx)(I,{data:s,baseCurrency:t})})]})},Z=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,25)).then((function(n){var t=n.getCLS,c=n.getFID,i=n.getFCP,o=n.getLCP,r=n.getTTFB;t(e),c(e),i(e),o(e),r(e)}))},$=Object(p.a)(X||(X=Object(d.a)(["\n  @import url('https://fonts.googleapis.com/css2?family=Lato:wght@100;300;400;700;900&display=swap');\n  @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@100;400&display=swap');\n  body {\n    font-family: 'Lato', 'Noto Sans TC', sans-serif ;\n    margin:0 ;\n    padding: 0;\n  }\n"])));u.a.render(Object(h.jsxs)(s.a.StrictMode,{children:[Object(h.jsx)($,{}),Object(h.jsx)(Y,{})]}),document.getElementById("root")),Z()}},[[24,1,2]]]);
//# sourceMappingURL=main.fb7aebbe.chunk.js.map